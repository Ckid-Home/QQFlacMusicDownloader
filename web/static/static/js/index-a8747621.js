import{o as r,c as d,a as t,G as H,u as a,M as j,U as l,ag as v,O as M,S as N,aw as T,ax as D,ay as re,b as Y,T as k,r as w,w as W,F as oe,a7 as ne,R as X,J as Z,Y as ue,az as de}from"./@vue-f15c76bc.js";import{i as _e}from"./element-plus-b5090b1f.js";import{p as pe,q as he}from"./@vueuse-22e869cd.js";import{d as me,s as fe,c as ve}from"./pinia-bd0a848f.js";import{Q as ge,R as ye,M as $e}from"./@element-plus-0f5ecb7c.js";import{a as be}from"./axios-aba6f0e0.js";import{u as ke,a as we,c as Se,b as Me}from"./vue-router-bf42f748.js";import{Q as Ce}from"./qrcode.vue-6dda2fcc.js";import{s as xe}from"./pinia-plugin-persistedstate-4f3b1591.js";import"./lodash-es-36eb724a.js";import"./@popperjs-c75af06c.js";import"./@ctrl-94ce4232.js";import"./dayjs-efcede2d.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-1d60d822.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-06b136b6.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))h(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const y of c.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&h(y)}).observe(document,{childList:!0,subtree:!0});function n(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function h(s){if(s.ep)return;s.ep=!0;const c=n(s);fetch(s.href,c)}})();const Ie={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},Le=t("path",{fill:"currentColor",d:"M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6ZM5.394 6.813L6.81 5.399l3.505 3.506L8.9 10.319zM2 15.005h5v2H2zm3.394 10.193L8.9 21.692l1.414 1.414l-3.505 3.506zM15 25.005h2v5h-2zm6.687-1.9l1.414-1.414l3.506 3.506l-1.414 1.414zm3.313-8.1h5v2h-5zm-3.313-6.101l3.506-3.506l1.414 1.414l-3.506 3.506zM15 2.005h2v5h-2z"},null,-1),ze=[Le];function Ue(e,o){return r(),d("svg",Ie,ze)}const Ve={name:"carbon-sun",render:Ue},He={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},Fe=t("path",{fill:"currentColor",d:"M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3Z"},null,-1),Pe=[Fe];function Ae(e,o){return r(),d("svg",He,Pe)}const Ne={name:"carbon-moon",render:Ae},Te=me("basicStore",{state:()=>({firstOpen:!0,token:"",searchHistory:[],lastSearch:"",config:{onlyMatchSearchKey:!1,ignoreNoAlbumSongs:!1,classificationMusicFile:!1,concurrency:{num:16,downloadFolder:""}},netease:{isLogin:!1,token:"",anonimousCookie:"",user:{}}}),getters:{},actions:{initEnv(){}},persist:!0}),B=()=>({basicStore:Te()}),se=fe,De={class:"App"},Be=H({__name:"App",setup(e){const o=pe(),n=he(o),h=B(),{basicStore:s}=h;return s.initEnv(),(c,y)=>{const m=Ne,S=Ve,I=v("router-view");return r(),d("div",De,[t("button",{class:"switch",onClick:y[0]||(y[0]=b=>a(n)())},[a(o)?(r(),j(m,{key:0})):(r(),j(S,{key:1}))]),l(I)])}}});const z=(e,o)=>{const n=e.__vccOpts||e;for(const[h,s]of o)n[h]=s;return n},Qe=z(Be,[["__scopeId","data-v-683f8440"]]),Re=()=>({token:"test"}),qe={baseURL:"http://localhost:8899",timeout:1e3,headers:{"Content-Type":"multipart/form-data;application/json;charset=UTF-8;"}},G=be.create(qe);G.interceptors.request.use(e=>{const o=Re().token;return e.headers.token=o,e},e=>Promise.resolve(e));G.interceptors.response.use(e=>(console.log(e),e),e=>Promise.resolve(e));const ee=G,$={pack(e){return e.data},async get(e){const o=await ee.get(e);return this.pack(o)},async post(e,o){const n=await ee.post(e,o,{headers:{"Content-Type":"application/json"}});return this.pack(n)},async status(){return this.get("/status")},async searchMusic(e,o,n="qq",h=30){let s="";return n==="qq"?s="/qq/search/"+e+"/"+o:n==="kw"&&(s="/kw/search/"+e+"/"+o+"/"+h),this.get(s)},postDownload(e,o,n="qq"){return this.post("/download",{music:e,config:o,platform:n})},setBaseConfig(e){return this.post("/config",e)},getBaseConfig(){return this.get("/getConfig")},getNeteaseQRCode(){return this.get("/es/qrLogin")},checkESState:e=>$.get("/es/checkLoginState/"+e),getNetEaseUserInfo:()=>$.get("/es/getUserInfo"),setESCookie:e=>$.post("/es/setCookie",e),initAnonimous:()=>$.get("/es/initAnonimous"),getUserPlaylist:e=>$.get("/es/getUserPlaylist/"+e),getMusicListByPlaylistID:(e,o,n)=>$.get(`/es/getMusicListByPlaylistID/${e}/${o}/${n}`)},x=e=>(T("data-v-f6ae7dcc"),e=e(),D(),e),Ke={class:"content"},Oe=x(()=>t("h1",{style:{"text-align":"center"}},"网易云曲库流浪计划",-1)),Ee={class:"description"},je=x(()=>t("div",null,"本作品实现了如下功能:",-1)),Ye=x(()=>t("br",null,null,-1)),Ze=x(()=>t("div",null,[N("1.QQ音乐 无损音质解析下载 "),t("br"),N(" 自动提取最高音质下载 "),t("br"),t("span",null,"Hi-Res -> Flac -> 320KbpsMP3 -> 128KbpsMP3")],-1)),Ge=x(()=>t("br",null,null,-1)),Je=x(()=>t("div",null," 2. 登录网易云同步歌单匹配下载 - 开发中，未完成。 ",-1)),We={class:"function"},Xe={class:"threadControl"},et=x(()=>t("div",null,"多线程设置",-1)),tt={class:"threadControl"},ot=x(()=>t("div",null,"下载目录设置",-1)),nt={class:"actions"},st=x(()=>t("div",{class:"button-bar"},[t("span",null,"Music Quality Upgrade Plan"),t("span",null,"Design by QiuChenly")],-1)),lt=H({__name:"Home",setup(e){const{basicStore:o}=B(),n=()=>{$.setBaseConfig({num:o.config.concurrency.num,folder:o.config.concurrency.downloadFolder}).then(s=>{})};return(()=>{$.getBaseConfig().then(s=>{o.config.concurrency.num=s.num,o.config.concurrency.downloadFolder=s.folder})})(),(s,c)=>{const y=v("el-input"),m=v("el-button");return r(),d("div",Ke,[Oe,t("div",Ee,[je,Ye,Ze,Ge,Je,t("div",We,[t("div",Xe,[et,l(y,{modelValue:a(o).config.concurrency.num,"onUpdate:modelValue":c[0]||(c[0]=S=>a(o).config.concurrency.num=S),placeholder:"输入协程并发数量","prefix-icon":a(ge)},null,8,["modelValue","prefix-icon"])]),t("div",tt,[ot,l(y,{style:{width:"400px"},modelValue:a(o).config.concurrency.downloadFolder,"onUpdate:modelValue":c[1]||(c[1]=S=>a(o).config.concurrency.downloadFolder=S),placeholder:"输入下载目录路径","prefix-icon":a(ye)},null,8,["modelValue","prefix-icon"])]),t("div",nt,[l(m,{type:"success",onClick:n},{default:M(()=>[N("保存")]),_:1})])])]),st])}}});const te=z(lt,[["__scopeId","data-v-f6ae7dcc"]]),at={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},it=t("path",{fill:"currentColor",d:"M26 24v4H6v-4H4v4a2 2 0 0 0 2 2h20a2 2 0 0 0 2-2v-4zm0-10l-1.41-1.41L17 20.17V2h-2v18.17l-7.59-7.58L6 14l10 10l10-10z"},null,-1),ct=[it];function rt(e,o){return r(),d("svg",at,ct)}const ut={name:"carbon-download",render:rt},dt={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},_t=t("path",{fill:"currentColor",d:"M28 18h2v10h-2zm-4-4h2v14h-2zm-4 8h2v6h-2zm2.175-12l1.585-1.266a9.952 9.952 0 0 0-5.87-3.552a10.002 10.002 0 0 0-11.72 7.933A7.505 7.505 0 0 0 .054 21.41A7.684 7.684 0 0 0 7.77 28H16v-2H7.694a5.632 5.632 0 0 1-5.602-4.486a5.506 5.506 0 0 1 4.434-6.43l1.349-.245l.214-1.11a8.206 8.206 0 0 1 6.742-6.642a7.967 7.967 0 0 1 3.014.13A7.804 7.804 0 0 1 22.175 10z"},null,-1),pt=[_t];function ht(e,o){return r(),d("svg",dt,pt)}const mt={name:"carbon-cloud-data-ops",render:ht},ft={viewBox:"0 0 21 21",width:"1.2em",height:"1.2em"},vt=t("g",{fill:"none","fill-rule":"evenodd",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"},[t("circle",{cx:"8.5",cy:"8.5",r:"5"}),t("path",{d:"M17.571 17.5L12 12"})],-1),gt=[vt];function yt(e,o){return r(),d("svg",ft,gt)}const $t={name:"system-uicons-search",render:yt},bt={viewBox:"0 0 21 21",width:"1.2em",height:"1.2em"},kt=re('<g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M10.5 14.5c2.219 0 4-1.763 4-3.982a4.003 4.003 0 0 0-4-4.018c-2.219 0-4 1.781-4 4c0 2.219 1.781 4 4 4zM4.136 4.136L5.55 5.55m9.9 9.9l1.414 1.414M1.5 10.5h2m14 0h2M4.135 16.863L5.55 15.45m9.899-9.9l1.414-1.415M10.5 19.5v-2m0-14v-2" opacity=".3"></path><g transform="translate(-210 -1)"><path d="M220.5 2.5v2m6.5.5l-1.5 1.5"></path><circle cx="220.5" cy="11.5" r="4"></circle><path d="m214 5l1.5 1.5m5 14v-2m6.5-.5l-1.5-1.5M214 18l1.5-1.5m-4-5h2m14 0h2"></path></g></g>',1),wt=[kt];function St(e,o){return r(),d("svg",bt,wt)}const Mt={name:"system-uicons-sun",render:St},Q=e=>(T("data-v-0a116e64"),e=e(),D(),e),Ct={class:"content"},xt={class:"left-banner"},It=Q(()=>t("div",{class:"title"},"QQ音乐无损音源下载工具",-1)),Lt={class:"functions"},zt=Q(()=>t("span",null,"主页",-1)),Ut=Q(()=>t("span",null,"音乐搜索",-1)),Vt=Q(()=>t("span",null,"网易云登录",-1)),Ht=Q(()=>t("span",null,"下载列表",-1)),Ft={class:"right-content"},Pt=H({__name:"Index",setup(e){const{basicStore:o}=B(),n=ke();return Y(()=>{o.firstOpen&&setTimeout(()=>{o.token="simulate load custom token",o.firstOpen=!1},2e3)}),(h,s)=>{const c=Mt,y=$t,m=mt,S=ut,I=v("router-view");return r(),d("div",Ct,[t("div",xt,[It,t("div",Lt,[t("div",{class:"home-page",onClick:s[0]||(s[0]=b=>a(n).push("/home"))},[l(c),zt]),t("div",{class:"home-page",onClick:s[1]||(s[1]=b=>a(n).push("/search"))},[l(y),Ut]),t("div",{class:"home-page",onClick:s[2]||(s[2]=b=>a(n).push("/netease"))},[l(m),Vt]),t("div",{class:"home-page",onClick:s[3]||(s[3]=b=>a(n).push("/download"))},[l(S),Ht])])]),t("div",Ft,[l(I)])])}}});const At=z(Pt,[["__scopeId","data-v-0a116e64"]]),Nt=e=>(T("data-v-9d59bf98"),e=e(),D(),e),Tt={class:"error"},Dt=Nt(()=>t("h1",null,"404 - 没有找到你想要的页面。",-1)),Bt=H({__name:"NotFound",setup(e){let o=we();return(n,h)=>{const s=v("router-link");return r(),d("div",Tt,[Dt,t("h3",null,k(a(o).fullPath),1),l(s,{to:"/"},{default:M(()=>[N("-> Go Home")]),_:1})])}}});const Qt=z(Bt,[["__scopeId","data-v-9d59bf98"]]),Rt={viewBox:"0 0 48 48",width:"1.2em",height:"1.2em"},qt=["id"],Kt={fill:"none"},Ot=["clip-path"],Et=t("path",{fill:"#555","stroke-linejoin":"round","stroke-width":"4.302",d:"M44.782 24.17L31.918 7.1L14.135 20.5L27.5 37l3.356-2.336L44.782 24.17Z"},null,-1),jt=t("path",{"stroke-linejoin":"round","stroke-width":"4.302",d:"m27.5 37l-3.839 3.075l-10.563-.001l-2.6-3.45l-6.433-8.536L14.5 20.225"},null,-1),Yt=t("path",{"stroke-linecap":"round","stroke-width":"4.5",d:"M13.206 40.072h31.36"},null,-1),Zt=[Et,jt,Yt],Gt=["id"],Jt=t("path",{fill:"#fff",d:"M0 0h48v48H0z"},null,-1),Wt=[Jt],Xt=["mask"];function eo(e,o){return r(),d("svg",Rt,[t("mask",{id:e.idMap.ipTClearFormat0},[t("g",Kt,[t("g",{stroke:"#fff","clip-path":"url(#"+e.idMap.ipTClearFormat1+")"},Zt,8,Ot),t("defs",null,[t("clipPath",{id:e.idMap.ipTClearFormat1},Wt,8,Gt)])])],8,qt),t("path",{fill:"currentColor",d:"M0 0h48v48H0z",mask:"url(#"+e.idMap.ipTClearFormat0+")"},null,8,Xt)])}const to={name:"icon-park-twotone-clear-format",render:eo,data(){const e=()=>Math.random().toString(36).substr(2,10);return{idMap:{ipTClearFormat1:"uicons-"+e(),ipTClearFormat0:"uicons-"+e()}}}},oo={viewBox:"0 0 21 21",width:"1.2em",height:"1.2em"},no=t("g",{fill:"none","fill-rule":"evenodd"},[t("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round",d:"M2.5 10.55a8 8 0 1 1 1.073 3.952"}),t("path",{fill:"currentColor","fill-rule":"nonzero",d:"m2.5 13.5l2.5-3H0z"}),t("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 6.5v5h3"})],-1),so=[no];function lo(e,o){return r(),d("svg",oo,so)}const ao={name:"system-uicons-undo-history",render:lo},le=e=>(T("data-v-4b92e71d"),e=e(),D(),e),io={class:"content"},co=le(()=>t("h1",null,"搜索",-1)),ro={class:"options"},uo={key:0,class:"history"},_o={class:"union"},po=le(()=>t("span",{style:{"margin-left":"4px"}},"历史搜索",-1)),ho={class:"h-list"},mo=["onClick"],fo={key:0,style:{margin:"10px"},class:"error-load"},vo={key:1,class:"search-list-a"},go={class:"search-hint"},yo={class:"container"},$o={class:"title-tip"},bo={key:0,class:"flac-tip"},ko={class:"name"},wo=H({__name:"SearchMusic",setup(e){const o=w("kw"),{basicStore:n}=B(),h=se(n),s=w(1),c=w();W(h.lastSearch,(u,_)=>{u.length===0&&(m.value=void 0,s.value=1)}),W(o,()=>{m.value=void 0,s.value=1});function y(){b()}const m=w(),S=u=>u.singer,I=u=>n.config.ignoreNoAlbumSongs?u.album!=="未分类专辑"&&u.album!=="":n.config.onlyMatchSearchKey?S(u).indexOf(n.lastSearch)!==-1:!0,b=()=>{n.searchHistory.find((u,_,i)=>u===n.lastSearch)===void 0&&n.searchHistory.push(n.lastSearch),$.searchMusic(n.lastSearch,s.value,o.value).then(u=>{let _=[];u.list.forEach(i=>{I(i)&&_.push(i)}),u.list=_,m.value=u})};function F(u,_,i,f){return S(u)}function U(u,_,i,f){return u.notice+" | "+u.size}const P=w(0);Y(()=>{const u=c.value;P.value=u.offsetTop+u.offsetHeight});const R=u=>{console.log(u),$.postDownload(u,{onlyMatchSearchKey:n.config.onlyMatchSearchKey,ignoreNoAlbumSongs:n.config.ignoreNoAlbumSongs,classificationMusicFile:n.config.classificationMusicFile},o.value)};return(u,_)=>{const i=v("el-option"),f=v("el-select"),C=v("el-button"),q=v("el-input"),A=v("el-checkbox"),V=ao,O=to,L=v("el-table-column"),E=v("el-table"),g=v("el-pagination");return r(),d("div",io,[t("div",{ref_key:"headRef",ref:c,class:"head-section"},[co,l(q,{modelValue:a(n).lastSearch,"onUpdate:modelValue":_[2]||(_[2]=p=>a(n).lastSearch=p),placeholder:"请输入关键词搜索",class:"input-with-select"},{prepend:M(()=>[l(f,{modelValue:o.value,"onUpdate:modelValue":_[0]||(_[0]=p=>o.value=p),placeholder:"请选择接口",style:{width:"120px"}},{default:M(()=>[l(i,{label:"QQ音乐",value:"qq"}),l(i,{label:"酷我音乐",value:"kw"})]),_:1},8,["modelValue"])]),append:M(()=>[l(C,{icon:a($e),onClick:_[1]||(_[1]=()=>{m.value=void 0,s.value=1,b()})},null,8,["icon"])]),_:1},8,["modelValue"]),t("div",ro,[l(A,{modelValue:a(n).config.onlyMatchSearchKey,"onUpdate:modelValue":_[3]||(_[3]=p=>a(n).config.onlyMatchSearchKey=p),label:"仅显示搜索的歌手歌曲"},null,8,["modelValue"]),l(A,{modelValue:a(n).config.ignoreNoAlbumSongs,"onUpdate:modelValue":_[4]||(_[4]=p=>a(n).config.ignoreNoAlbumSongs=p),label:"屏蔽无所属专辑歌曲"},null,8,["modelValue"]),l(A,{modelValue:a(n).config.classificationMusicFile,"onUpdate:modelValue":_[5]||(_[5]=p=>a(n).config.classificationMusicFile=p),label:"下载歌曲按专辑分类"},null,8,["modelValue"])])],512),m.value===void 0||a(n).lastSearch.length===0?(r(),d("div",uo,[t("div",_o,[l(V),po]),t("div",ho,[(r(!0),d(oe,null,ne(a(h).searchHistory.value,p=>(r(),d("div",{onClick:ce=>a(n).lastSearch=p,class:"search-tag"},k(p),9,mo))),256))]),a(n).searchHistory.length>0?(r(),d("div",{key:0,class:"clear-all-history",onClick:_[6]||(_[6]=p=>a(n).searchHistory=[])},[l(O)])):X("",!0)])):(r(),d("div",{key:1,class:"search-list",style:Z({height:"calc(100% - "+P.value+"px)"})},[m.value===void 0||m.value.list.length===0?(r(),d("div",fo,[t("span",null,k(m.value.page.size>0?"过滤后没有发现符合条件的数据。":"服务器请求搜索结果失败,请重试。"),1)])):(r(),d("div",vo,[t("span",go,"结果列表[搜索到"+k(m.value.page.size)+"条数据,当前第"+k(m.value.page.cur)+"页]",1),t("div",yo,[l(E,{class:"my-tb",data:m.value.list,style:{width:"100%","z-index":"0"}},{default:M(()=>[l(L,{formatter:p=>p.time_publish===""?"1970-01-01":p.time_publish,prop:"time_public",label:"发表时间",width:"120"},null,8,["formatter"]),l(L,{"show-overflow-tooltip":"true",prop:"title",label:"歌曲名","min-width":"300"},{default:M(p=>[t("div",$o,[p.row.extra==="flac"?(r(),d("div",bo,"无损")):X("",!0),t("div",ko,k(p.row.title),1)])]),_:1}),l(L,{"show-overflow-tooltip":"true",formatter:F,prop:"singer.name",label:"艺术家",width:"200"}),l(L,{"show-overflow-tooltip":"true",prop:"album",label:"专辑",width:"200"}),l(L,{formatter:U,"show-overflow-tooltip":"true",prop:"notice",label:"品质",width:"250"}),l(L,{fixed:"right",label:"操作"},{default:M(p=>[l(C,{link:"",type:"primary",size:"small",onClick:ce=>R(p.row)},{default:M(()=>[N("下载 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),l(g,{"current-page":s.value,"onUpdate:currentPage":[_[7]||(_[7]=p=>s.value=p),y],background:"",class:"tab-split","page-size":30,layout:"prev, pager, next",total:parseInt(m.value.page.size+"")},null,8,["current-page","total"])]))],4))])}}});const So=z(wo,[["__scopeId","data-v-4b92e71d"]]);function ae(e){let o=new Date(e),n=o.getFullYear()+"-",h=(o.getMonth()+1<10?"0"+(o.getMonth()+1):o.getMonth()+1)+"-",s=(o.getDate()<10?"0"+o.getDate():o.getDate())+" ",c=(o.getHours()<10?"0"+o.getHours():o.getHours())+":",y=(o.getMinutes()<10?"0"+o.getMinutes():o.getMinutes())+":",m=o.getSeconds()<10?"0"+o.getSeconds():o.getSeconds();return n+h+s+c+y+m}const Mo={class:"user-info"},Co={class:"info-area"},xo={class:"tag"},Io={class:"area"},Lo={class:"nickname"},zo={class:"reg-time"},Uo=H({__name:"UserInfo",props:{userInfo:null},setup(e){return(o,n)=>{const h=v("el-avatar");return r(),d("div",Mo,[l(h,{class:"avatar",size:100,src:e.userInfo.profile.avatarUrl},null,8,["src"]),t("div",{class:"bg",style:Z({background:"no-repeat center/cover url("+e.userInfo.profile.backgroundUrl+")"})},null,4),t("div",Co,[t("div",null,"UID "+k(e.userInfo.profile.userId),1),t("div",xo,k(e.userInfo.profile.vipType===0?"非会员":"会员"+e.userInfo.profile.viptypeVersion+"级别"),1),t("div",Io,[t("div",Lo,k(e.userInfo.profile.nickname),1)]),t("div",zo,"注册时间 "+k(a(ae)(e.userInfo.profile.createTime)),1)])])}}});const Vo=z(Uo,[["__scopeId","data-v-9fb78af5"]]),Ho={class:"content"},Fo={key:0,class:"no-login"},Po={key:1,class:"login"},Ao={class:"list-content"},No={class:"list-right"},To={class:"list-name"},Do={class:"list-size"},Bo={class:"search-hint"},Qo=H({__name:"Netease",setup(e){const{basicStore:o}=B(),n=se(o),h=w(""),s=w(""),c=w(1),y=w(50),m=w(),S=w(),I=w(0),b={switchLoginQRCode(){$.getNeteaseQRCode().then(i=>{s.value=i.qrcode.uniKey,this.checkLoginState()})},checkLoginState(){F=setInterval(async()=>{let i=await $.checkESState(s.value);switch(i.code){case 800:h.value="验证码过期，自动切换中...",b.switchLoginQRCode(),clearInterval(F);break;case 801:h.value="等待用户扫码";break;case 802:h.value="等待确认";break;case 803:clearInterval(F),h.value="登录成功",o.netease.isLogin=!0,o.netease.token=i.cookie,this.getUserInfo();break}},2e3)},getUserInfo(){return $.getNetEaseUserInfo().then(i=>{o.netease.user=i})},async initAnonimous(){let i=await $.initAnonimous();o.netease.anonimousCookie=i.cookie},setUserCookie(i){return $.setESCookie({cookie:i})},fetchUserPlaylist(){let i=o.netease.user.profile.userId;return $.getUserPlaylist(i+"").then(f=>{R.value=f.list;let C=f.list[0].id;return P.value=f.list[0].trackCount,U.value=C,this.fetchPlayListMusic(C+"")})},fetchPlayListMusic(i){return $.getMusicListByPlaylistID(i,c.value,y.value).then(f=>{f!==void 0&&f.code!==20001&&(m.value=f.list)})}};let F=-1;Y(()=>{var i,f;if(!o.netease.isLogin)b.initAnonimous().then(C=>{b.switchLoginQRCode()});else{let C=o.netease.token;b.setUserCookie(C).then(q=>{b.getUserInfo().then(A=>b.fetchUserPlaylist())})}I.value=((i=S.value)==null?void 0:i.offsetHeight)+((f=S.value)==null?void 0:f.offsetTop)}),ue(()=>{clearInterval(F)});const U=w(),P=w(0),R=w(),u=i=>{c.value=i,b.fetchPlayListMusic(U.value)},_=i=>{$.postDownload(i,{onlyMatchSearchKey:o.config.onlyMatchSearchKey,ignoreNoAlbumSongs:o.config.ignoreNoAlbumSongs,classificationMusicFile:o.config.classificationMusicFile},"wyy")};return(i,f)=>{const C=v("el-avatar"),q=v("el-option"),A=v("el-select"),V=v("el-table-column"),O=v("el-button"),L=v("el-table"),E=v("el-pagination");return r(),d("div",Ho,[t("div",{ref_key:"head",ref:S,class:"head"},"网易云 - "+k(a(n).netease.value.isLogin?a(n).netease.value.user.profile.nickname:"请登录"),513),t("div",{class:"areas",style:Z({height:"calc(100vh - "+I.value+"px)"})},[a(n).netease.value.isLogin?(r(),d("div",Po,[l(Vo,{"user-info":a(n).netease.value.user},null,8,["user-info"]),t("div",Ao,[l(A,{class:"playlist",onChange:f[0]||(f[0]=g=>b.fetchPlayListMusic(U.value+"")),modelValue:U.value,"onUpdate:modelValue":f[1]||(f[1]=g=>U.value=g),placeholder:"选择一个歌单",size:"large"},{default:M(()=>[(r(!0),d(oe,null,ne(R.value,g=>(r(),j(q,{key:g.id,label:g.name,value:g.id,class:"select-list"},{default:M(()=>[l(C,{class:"list-img",src:g.coverImgUrl},null,8,["src"]),t("div",No,[t("span",To,k(g.name),1),t("span",Do,k(g.trackCount)+"首",1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"]),t("span",Bo,"结果列表[搜索到"+k(P.value)+"条数据,当前第"+k(c.value)+"页]",1),l(L,{class:"my-tb",data:m.value,style:{width:"100%","z-index":"0"}},{default:M(()=>[l(V,{formatter:g=>a(ae)(g.publishTime).split(" ")[0],prop:"publishTime",label:"发表时间",width:"120"},null,8,["formatter"]),l(V,{"show-overflow-tooltip":"true",prop:"name",label:"歌曲名","min-width":"300"}),l(V,{"show-overflow-tooltip":"true",formatter:g=>g.author.map(p=>p.name).join(" / "),prop:"singer.name",label:"艺术家",width:"200"},null,8,["formatter"]),l(V,{"show-overflow-tooltip":"true",prop:"album.name",label:"专辑",width:"200"}),l(V,{fixed:"right",label:"操作",width:"120"},{default:M(g=>[l(O,{link:"",type:"primary",size:"small",onClick:p=>_(g.row)},{default:M(()=>[N("下载 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(E,{"current-page":c.value,"onUpdate:currentPage":[f[2]||(f[2]=g=>c.value=g),u],background:"",class:"tab-split","page-size":y.value,layout:"prev, pager, next",total:P.value},null,8,["current-page","page-size","total"])])])):(r(),d("div",Fo,[t("div",null,k(h.value),1),l(Ce,{value:"http://music.163.com/login?codekey="+s.value,size:200,level:"H"},null,8,["value"])]))],4)])}}});const Ro=z(Qo,[["__scopeId","data-v-b4c96082"]]);const qo={},J=e=>(T("data-v-fc626737"),e=e(),D(),e),Ko={class:"content"},Oo=J(()=>t("h1",null,"`YuanShen` Homo Lovly :)",-1)),Eo=J(()=>t("br",null,null,-1)),jo=J(()=>t("h2",null,"暂时没想好怎么写",-1)),Yo=[Oo,Eo,jo];function Zo(e,o){return r(),d("div",Ko,Yo)}const Go=z(qo,[["render",Zo],["__scopeId","data-v-fc626737"]]),Jo=[{path:"/",name:"Index",component:At,children:[{path:"home",alias:"/",component:te},{path:"search",component:So},{path:"netease",component:Ro},{path:"download",component:Go}]},{path:"/home",name:"home",component:te},{path:"/:catchAll(.*)",component:Qt}],Wo=Se({history:Me(),routes:Jo}),K=de(Qe),ie=ve();ie.use(xe);K.use(Wo);K.use(ie);K.use(_e);K.mount("#app");
