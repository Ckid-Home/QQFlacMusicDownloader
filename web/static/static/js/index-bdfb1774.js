import{o as r,c as u,a as o,G as F,u as i,M as j,U as a,ag as v,O as k,S as U,aw as T,ax as D,ay as ie,b as Y,T as w,r as b,w as W,F as te,a7 as oe,R as ce,J as Z,Y as re,az as ue}from"./@vue-f15c76bc.js";import{i as de}from"./element-plus-b5090b1f.js";import{p as _e,q as pe}from"./@vueuse-22e869cd.js";import{d as he,s as me,c as fe}from"./pinia-bd0a848f.js";import{Q as ve,R as ge,M as ye}from"./@element-plus-0f5ecb7c.js";import{a as $e}from"./axios-aba6f0e0.js";import{u as be,a as ke,c as we,b as Se}from"./vue-router-bf42f748.js";import{Q as Me}from"./qrcode.vue-6dda2fcc.js";import{s as Ce}from"./pinia-plugin-persistedstate-4f3b1591.js";import"./lodash-es-36eb724a.js";import"./@popperjs-c75af06c.js";import"./@ctrl-94ce4232.js";import"./dayjs-efcede2d.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-1d60d822.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-06b136b6.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))p(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const g of c.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&p(g)}).observe(document,{childList:!0,subtree:!0});function n(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function p(s){if(s.ep)return;s.ep=!0;const c=n(s);fetch(s.href,c)}})();const xe={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},Ie=o("path",{fill:"currentColor",d:"M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6ZM5.394 6.813L6.81 5.399l3.505 3.506L8.9 10.319zM2 15.005h5v2H2zm3.394 10.193L8.9 21.692l1.414 1.414l-3.505 3.506zM15 25.005h2v5h-2zm6.687-1.9l1.414-1.414l3.506 3.506l-1.414 1.414zm3.313-8.1h5v2h-5zm-3.313-6.101l3.506-3.506l1.414 1.414l-3.506 3.506zM15 2.005h2v5h-2z"},null,-1),Le=[Ie];function ze(e,t){return r(),u("svg",xe,Le)}const Ue={name:"carbon-sun",render:ze},Ve={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},He=o("path",{fill:"currentColor",d:"M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3Z"},null,-1),Fe=[He];function Pe(e,t){return r(),u("svg",Ve,Fe)}const Ae={name:"carbon-moon",render:Pe},Ne=he("basicStore",{state:()=>({firstOpen:!0,token:"",searchHistory:[],lastSearch:"",config:{onlyMatchSearchKey:!1,ignoreNoAlbumSongs:!1,classificationMusicFile:!1,concurrency:{num:16,downloadFolder:""}},netease:{isLogin:!1,token:"",anonimousCookie:"",user:{}}}),getters:{},actions:{initEnv(){}},persist:!0}),B=()=>({basicStore:Ne()}),ne=me,Te={class:"App"},De=F({__name:"App",setup(e){const t=_e(),n=pe(t),p=B(),{basicStore:s}=p;return s.initEnv(),(c,g)=>{const m=Ae,S=Ue,L=v("router-view");return r(),u("div",Te,[o("button",{class:"switch",onClick:g[0]||(g[0]=$=>i(n)())},[i(t)?(r(),j(m,{key:0})):(r(),j(S,{key:1}))]),a(L)])}}});const V=(e,t)=>{const n=e.__vccOpts||e;for(const[p,s]of t)n[p]=s;return n},Be=V(De,[["__scopeId","data-v-683f8440"]]),Qe=()=>({token:"test"}),Re={baseURL:"http://localhost:8899",timeout:1e3,headers:{"Content-Type":"multipart/form-data;application/json;charset=UTF-8;"}},G=$e.create(Re);G.interceptors.request.use(e=>{const t=Qe().token;return e.headers.token=t,e},e=>Promise.resolve(e));G.interceptors.response.use(e=>(console.log(e),e),e=>Promise.resolve(e));const X=G,y={pack(e){return e.data},async get(e){const t=await X.get(e);return this.pack(t)},async post(e,t){const n=await X.post(e,t,{headers:{"Content-Type":"application/json"}});return this.pack(n)},async status(){return this.get("/status")},async searchMusic(e,t,n="qq",p=30){let s="";return n==="qq"?s="/qq/search/"+e+"/"+t:n==="kw"&&(s="/kw/search/"+e+"/"+t+"/"+p),this.get(s)},postDownload(e,t,n="qq"){return this.post("/download",{music:e,config:t,platform:n})},setBaseConfig(e){return this.post("/config",e)},getBaseConfig(){return this.get("/getConfig")},getNeteaseQRCode(){return this.get("/es/qrLogin")},checkESState:e=>y.get("/es/checkLoginState/"+e),getNetEaseUserInfo:()=>y.get("/es/getUserInfo"),setESCookie:e=>y.post("/es/setCookie",e),initAnonimous:()=>y.get("/es/initAnonimous"),getUserPlaylist:e=>y.get("/es/getUserPlaylist/"+e),getMusicListByPlaylistID:(e,t,n)=>y.get(`/es/getMusicListByPlaylistID/${e}/${t}/${n}`)},I=e=>(T("data-v-f6ae7dcc"),e=e(),D(),e),qe={class:"content"},Ke=I(()=>o("h1",{style:{"text-align":"center"}},"网易云曲库流浪计划",-1)),Oe={class:"description"},Ee=I(()=>o("div",null,"本作品实现了如下功能:",-1)),je=I(()=>o("br",null,null,-1)),Ye=I(()=>o("div",null,[U("1.QQ音乐 无损音质解析下载 "),o("br"),U(" 自动提取最高音质下载 "),o("br"),o("span",null,"Hi-Res -> Flac -> 320KbpsMP3 -> 128KbpsMP3")],-1)),Ze=I(()=>o("br",null,null,-1)),Ge=I(()=>o("div",null," 2. 登录网易云同步歌单匹配下载 - 开发中，未完成。 ",-1)),Je={class:"function"},We={class:"threadControl"},Xe=I(()=>o("div",null,"多线程设置",-1)),et={class:"threadControl"},tt=I(()=>o("div",null,"下载目录设置",-1)),ot={class:"actions"},nt=I(()=>o("div",{class:"button-bar"},[o("span",null,"Music Quality Upgrade Plan"),o("span",null,"Design by QiuChenly")],-1)),st=F({__name:"Home",setup(e){const{basicStore:t}=B(),n=()=>{y.setBaseConfig({num:t.config.concurrency.num,folder:t.config.concurrency.downloadFolder}).then(s=>{})};return(()=>{y.getBaseConfig().then(s=>{t.config.concurrency.num=s.num,t.config.concurrency.downloadFolder=s.folder})})(),(s,c)=>{const g=v("el-input"),m=v("el-button");return r(),u("div",qe,[Ke,o("div",Oe,[Ee,je,Ye,Ze,Ge,o("div",Je,[o("div",We,[Xe,a(g,{modelValue:i(t).config.concurrency.num,"onUpdate:modelValue":c[0]||(c[0]=S=>i(t).config.concurrency.num=S),placeholder:"输入协程并发数量","prefix-icon":i(ve)},null,8,["modelValue","prefix-icon"])]),o("div",et,[tt,a(g,{style:{width:"400px"},modelValue:i(t).config.concurrency.downloadFolder,"onUpdate:modelValue":c[1]||(c[1]=S=>i(t).config.concurrency.downloadFolder=S),placeholder:"输入下载目录路径","prefix-icon":i(ge)},null,8,["modelValue","prefix-icon"])]),o("div",ot,[a(m,{type:"success",onClick:n},{default:k(()=>[U("保存")]),_:1})])])]),nt])}}});const ee=V(st,[["__scopeId","data-v-f6ae7dcc"]]),at={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},lt=o("path",{fill:"currentColor",d:"M26 24v4H6v-4H4v4a2 2 0 0 0 2 2h20a2 2 0 0 0 2-2v-4zm0-10l-1.41-1.41L17 20.17V2h-2v18.17l-7.59-7.58L6 14l10 10l10-10z"},null,-1),it=[lt];function ct(e,t){return r(),u("svg",at,it)}const rt={name:"carbon-download",render:ct},ut={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},dt=o("path",{fill:"currentColor",d:"M28 18h2v10h-2zm-4-4h2v14h-2zm-4 8h2v6h-2zm2.175-12l1.585-1.266a9.952 9.952 0 0 0-5.87-3.552a10.002 10.002 0 0 0-11.72 7.933A7.505 7.505 0 0 0 .054 21.41A7.684 7.684 0 0 0 7.77 28H16v-2H7.694a5.632 5.632 0 0 1-5.602-4.486a5.506 5.506 0 0 1 4.434-6.43l1.349-.245l.214-1.11a8.206 8.206 0 0 1 6.742-6.642a7.967 7.967 0 0 1 3.014.13A7.804 7.804 0 0 1 22.175 10z"},null,-1),_t=[dt];function pt(e,t){return r(),u("svg",ut,_t)}const ht={name:"carbon-cloud-data-ops",render:pt},mt={viewBox:"0 0 21 21",width:"1.2em",height:"1.2em"},ft=o("g",{fill:"none","fill-rule":"evenodd",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"},[o("circle",{cx:"8.5",cy:"8.5",r:"5"}),o("path",{d:"M17.571 17.5L12 12"})],-1),vt=[ft];function gt(e,t){return r(),u("svg",mt,vt)}const yt={name:"system-uicons-search",render:gt},$t={viewBox:"0 0 21 21",width:"1.2em",height:"1.2em"},bt=ie('<g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M10.5 14.5c2.219 0 4-1.763 4-3.982a4.003 4.003 0 0 0-4-4.018c-2.219 0-4 1.781-4 4c0 2.219 1.781 4 4 4zM4.136 4.136L5.55 5.55m9.9 9.9l1.414 1.414M1.5 10.5h2m14 0h2M4.135 16.863L5.55 15.45m9.899-9.9l1.414-1.415M10.5 19.5v-2m0-14v-2" opacity=".3"></path><g transform="translate(-210 -1)"><path d="M220.5 2.5v2m6.5.5l-1.5 1.5"></path><circle cx="220.5" cy="11.5" r="4"></circle><path d="m214 5l1.5 1.5m5 14v-2m6.5-.5l-1.5-1.5M214 18l1.5-1.5m-4-5h2m14 0h2"></path></g></g>',1),kt=[bt];function wt(e,t){return r(),u("svg",$t,kt)}const St={name:"system-uicons-sun",render:wt},Q=e=>(T("data-v-0a116e64"),e=e(),D(),e),Mt={class:"content"},Ct={class:"left-banner"},xt=Q(()=>o("div",{class:"title"},"QQ音乐无损音源下载工具",-1)),It={class:"functions"},Lt=Q(()=>o("span",null,"主页",-1)),zt=Q(()=>o("span",null,"音乐搜索",-1)),Ut=Q(()=>o("span",null,"网易云登录",-1)),Vt=Q(()=>o("span",null,"下载列表",-1)),Ht={class:"right-content"},Ft=F({__name:"Index",setup(e){const{basicStore:t}=B(),n=be();return Y(()=>{t.firstOpen&&setTimeout(()=>{t.token="simulate load custom token",t.firstOpen=!1},2e3)}),(p,s)=>{const c=St,g=yt,m=ht,S=rt,L=v("router-view");return r(),u("div",Mt,[o("div",Ct,[xt,o("div",It,[o("div",{class:"home-page",onClick:s[0]||(s[0]=$=>i(n).push("/home"))},[a(c),Lt]),o("div",{class:"home-page",onClick:s[1]||(s[1]=$=>i(n).push("/search"))},[a(g),zt]),o("div",{class:"home-page",onClick:s[2]||(s[2]=$=>i(n).push("/netease"))},[a(m),Ut]),o("div",{class:"home-page",onClick:s[3]||(s[3]=$=>i(n).push("/download"))},[a(S),Vt])])]),o("div",Ht,[a(L)])])}}});const Pt=V(Ft,[["__scopeId","data-v-0a116e64"]]),At=e=>(T("data-v-9d59bf98"),e=e(),D(),e),Nt={class:"error"},Tt=At(()=>o("h1",null,"404 - 没有找到你想要的页面。",-1)),Dt=F({__name:"NotFound",setup(e){let t=ke();return(n,p)=>{const s=v("router-link");return r(),u("div",Nt,[Tt,o("h3",null,w(i(t).fullPath),1),a(s,{to:"/"},{default:k(()=>[U("-> Go Home")]),_:1})])}}});const Bt=V(Dt,[["__scopeId","data-v-9d59bf98"]]),Qt={viewBox:"0 0 48 48",width:"1.2em",height:"1.2em"},Rt=["id"],qt={fill:"none"},Kt=["clip-path"],Ot=o("path",{fill:"#555","stroke-linejoin":"round","stroke-width":"4.302",d:"M44.782 24.17L31.918 7.1L14.135 20.5L27.5 37l3.356-2.336L44.782 24.17Z"},null,-1),Et=o("path",{"stroke-linejoin":"round","stroke-width":"4.302",d:"m27.5 37l-3.839 3.075l-10.563-.001l-2.6-3.45l-6.433-8.536L14.5 20.225"},null,-1),jt=o("path",{"stroke-linecap":"round","stroke-width":"4.5",d:"M13.206 40.072h31.36"},null,-1),Yt=[Ot,Et,jt],Zt=["id"],Gt=o("path",{fill:"#fff",d:"M0 0h48v48H0z"},null,-1),Jt=[Gt],Wt=["mask"];function Xt(e,t){return r(),u("svg",Qt,[o("mask",{id:e.idMap.ipTClearFormat0},[o("g",qt,[o("g",{stroke:"#fff","clip-path":"url(#"+e.idMap.ipTClearFormat1+")"},Yt,8,Kt),o("defs",null,[o("clipPath",{id:e.idMap.ipTClearFormat1},Jt,8,Zt)])])],8,Rt),o("path",{fill:"currentColor",d:"M0 0h48v48H0z",mask:"url(#"+e.idMap.ipTClearFormat0+")"},null,8,Wt)])}const eo={name:"icon-park-twotone-clear-format",render:Xt,data(){const e=()=>Math.random().toString(36).substr(2,10);return{idMap:{ipTClearFormat1:"uicons-"+e(),ipTClearFormat0:"uicons-"+e()}}}},to={viewBox:"0 0 21 21",width:"1.2em",height:"1.2em"},oo=o("g",{fill:"none","fill-rule":"evenodd"},[o("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round",d:"M2.5 10.55a8 8 0 1 1 1.073 3.952"}),o("path",{fill:"currentColor","fill-rule":"nonzero",d:"m2.5 13.5l2.5-3H0z"}),o("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 6.5v5h3"})],-1),no=[oo];function so(e,t){return r(),u("svg",to,no)}const ao={name:"system-uicons-undo-history",render:so},se=e=>(T("data-v-6f20a464"),e=e(),D(),e),lo={class:"content"},io=se(()=>o("h1",null,"搜索",-1)),co={class:"options"},ro={key:0,class:"history"},uo={class:"union"},_o=se(()=>o("span",{style:{"margin-left":"4px"}},"历史搜索",-1)),po={class:"h-list"},ho=["onClick"],mo={key:0,style:{margin:"10px"},class:"error-load"},fo={key:1,class:"search-list-a"},vo={class:"search-hint"},go={class:"container"},yo=F({__name:"SearchMusic",setup(e){const t=b("kw"),{basicStore:n}=B(),p=ne(n),s=b(1),c=b();W(p.lastSearch,(d,h)=>{d.length===0&&(m.value=void 0,s.value=1)}),W(t,()=>{m.value=void 0,s.value=1});function g(){$()}const m=b(),S=d=>d.singer,L=d=>n.config.ignoreNoAlbumSongs?d.album!=="未分类专辑"&&d.album!=="":n.config.onlyMatchSearchKey?S(d).indexOf(n.lastSearch)!==-1:!0,$=()=>{n.searchHistory.find((d,h,M)=>d===n.lastSearch)===void 0&&n.searchHistory.push(n.lastSearch),y.searchMusic(n.lastSearch,s.value,t.value).then(d=>{let h=[];d.list.forEach(M=>{L(M)&&h.push(M)}),d.list=h,m.value=d})};function P(d,h,M,_){return S(d)}const z=b(0);Y(()=>{const d=c.value;z.value=d.offsetTop+d.offsetHeight});const N=d=>{console.log(d),y.postDownload(d,{onlyMatchSearchKey:n.config.onlyMatchSearchKey,ignoreNoAlbumSongs:n.config.ignoreNoAlbumSongs,classificationMusicFile:n.config.classificationMusicFile},t.value)};return(d,h)=>{const M=v("el-option"),_=v("el-select"),f=v("el-button"),C=v("el-input"),A=v("el-checkbox"),R=ao,H=eo,x=v("el-table-column"),O=v("el-table"),E=v("el-pagination");return r(),u("div",lo,[o("div",{ref_key:"headRef",ref:c,class:"head-section"},[io,a(C,{modelValue:i(n).lastSearch,"onUpdate:modelValue":h[1]||(h[1]=l=>i(n).lastSearch=l),placeholder:"请输入关键词搜索",class:"input-with-select"},{prepend:k(()=>[a(_,{modelValue:t.value,"onUpdate:modelValue":h[0]||(h[0]=l=>t.value=l),placeholder:"请选择接口",style:{width:"120px"}},{default:k(()=>[a(M,{label:"QQ音乐",value:"qq"}),a(M,{label:"酷我音乐",value:"kw"})]),_:1},8,["modelValue"])]),append:k(()=>[a(f,{icon:i(ye),onClick:$},null,8,["icon"])]),_:1},8,["modelValue"]),o("div",co,[a(A,{modelValue:i(n).config.onlyMatchSearchKey,"onUpdate:modelValue":h[2]||(h[2]=l=>i(n).config.onlyMatchSearchKey=l),label:"仅显示搜索的歌手歌曲"},null,8,["modelValue"]),a(A,{modelValue:i(n).config.ignoreNoAlbumSongs,"onUpdate:modelValue":h[3]||(h[3]=l=>i(n).config.ignoreNoAlbumSongs=l),label:"屏蔽无所属专辑歌曲"},null,8,["modelValue"]),a(A,{modelValue:i(n).config.classificationMusicFile,"onUpdate:modelValue":h[4]||(h[4]=l=>i(n).config.classificationMusicFile=l),label:"下载歌曲按专辑分类"},null,8,["modelValue"])])],512),m.value===void 0||i(n).lastSearch.length===0?(r(),u("div",ro,[o("div",uo,[a(R),_o]),o("div",po,[(r(!0),u(te,null,oe(i(p).searchHistory.value,l=>(r(),u("div",{onClick:q=>i(n).lastSearch=l,class:"search-tag"},w(l),9,ho))),256))]),i(n).searchHistory.length>0?(r(),u("div",{key:0,class:"clear-all-history",onClick:h[5]||(h[5]=l=>i(n).searchHistory=[])},[a(H)])):ce("",!0)])):(r(),u("div",{key:1,class:"search-list",style:Z({height:"calc(100% - "+z.value+"px)"})},[m.value===void 0||m.value.list.length===0?(r(),u("div",mo,[o("span",null,w(m.value.page.size>0?"过滤后没有发现符合条件的数据。":"服务器请求搜索结果失败,请重试。"),1)])):(r(),u("div",fo,[o("span",vo,"结果列表[搜索到"+w(m.value.page.size)+"条数据,当前第"+w(m.value.page.cur)+"页]",1),o("div",go,[a(O,{class:"my-tb",data:m.value.list,style:{width:"100%","z-index":"0"}},{default:k(()=>[a(x,{formatter:l=>l.time_publish===""?"1970-01-01":l.time_publish,prop:"time_public",label:"发表时间",width:"120"},null,8,["formatter"]),a(x,{"show-overflow-tooltip":"true",prop:"title",label:"歌曲名","min-width":"300"}),a(x,{"show-overflow-tooltip":"true",formatter:P,prop:"singer.name",label:"艺术家",width:"200"}),a(x,{"show-overflow-tooltip":"true",prop:"album",label:"专辑",width:"200"}),a(x,{"show-overflow-tooltip":"true",prop:"notice",label:"品质",width:"180"}),a(x,{fixed:"right",label:"操作",width:"120"},{default:k(l=>[a(f,{link:"",type:"primary",size:"small",onClick:q=>N(l.row)},{default:k(()=>[U("下载 ")]),_:2},1032,["onClick"]),a(f,{link:"",type:"primary",size:"small"},{default:k(()=>[U("试听")]),_:1})]),_:1})]),_:1},8,["data"])]),a(E,{"current-page":s.value,"onUpdate:currentPage":[h[6]||(h[6]=l=>s.value=l),g],background:"",class:"tab-split","page-size":30,layout:"prev, pager, next",total:parseInt(m.value.page.size+"")},null,8,["current-page","total"])]))],4))])}}});const $o=V(yo,[["__scopeId","data-v-6f20a464"]]);function ae(e){let t=new Date(e),n=t.getFullYear()+"-",p=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",s=(t.getDate()<10?"0"+t.getDate():t.getDate())+" ",c=(t.getHours()<10?"0"+t.getHours():t.getHours())+":",g=(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":",m=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();return n+p+s+c+g+m}const bo={class:"user-info"},ko={class:"info-area"},wo={class:"tag"},So={class:"area"},Mo={class:"nickname"},Co={class:"reg-time"},xo=F({__name:"UserInfo",props:{userInfo:null},setup(e){return(t,n)=>{const p=v("el-avatar");return r(),u("div",bo,[a(p,{class:"avatar",size:100,src:e.userInfo.profile.avatarUrl},null,8,["src"]),o("div",{class:"bg",style:Z({background:"no-repeat center/cover url("+e.userInfo.profile.backgroundUrl+")"})},null,4),o("div",ko,[o("div",null,"UID "+w(e.userInfo.profile.userId),1),o("div",wo,w(e.userInfo.profile.vipType===0?"非会员":"会员"+e.userInfo.profile.viptypeVersion+"级别"),1),o("div",So,[o("div",Mo,w(e.userInfo.profile.nickname),1)]),o("div",Co,"注册时间 "+w(i(ae)(e.userInfo.profile.createTime)),1)])])}}});const Io=V(xo,[["__scopeId","data-v-9fb78af5"]]),Lo={class:"content"},zo={key:0,class:"no-login"},Uo={key:1,class:"login"},Vo={class:"list-content"},Ho={class:"list-right"},Fo={class:"list-name"},Po={class:"list-size"},Ao={class:"search-hint"},No=F({__name:"Netease",setup(e){const{basicStore:t}=B(),n=ne(t),p=b(""),s=b(""),c=b(1),g=b(50),m=b(),S=b(),L=b(0),$={switchLoginQRCode(){y.getNeteaseQRCode().then(_=>{s.value=_.qrcode.uniKey,this.checkLoginState()})},checkLoginState(){P=setInterval(async()=>{let _=await y.checkESState(s.value);switch(_.code){case 800:p.value="验证码过期，自动切换中...",$.switchLoginQRCode(),clearInterval(P);break;case 801:p.value="等待用户扫码";break;case 802:p.value="等待确认";break;case 803:clearInterval(P),p.value="登录成功",t.netease.isLogin=!0,t.netease.token=_.cookie,this.getUserInfo();break}},2e3)},getUserInfo(){return y.getNetEaseUserInfo().then(_=>{t.netease.user=_})},async initAnonimous(){let _=await y.initAnonimous();t.netease.anonimousCookie=_.cookie},setUserCookie(_){return y.setESCookie({cookie:_})},fetchUserPlaylist(){let _=t.netease.user.profile.userId;return y.getUserPlaylist(_+"").then(f=>{d.value=f.list;let C=f.list[0].id;return N.value=f.list[0].trackCount,z.value=C,this.fetchPlayListMusic(C+"")})},fetchPlayListMusic(_){return y.getMusicListByPlaylistID(_,c.value,g.value).then(f=>{f!==void 0&&f.code!==20001&&(m.value=f.list)})}};let P=-1;Y(()=>{var _,f;if(!t.netease.isLogin)$.initAnonimous().then(C=>{$.switchLoginQRCode()});else{let C=t.netease.token;$.setUserCookie(C).then(A=>{$.getUserInfo().then(R=>$.fetchUserPlaylist())})}L.value=((_=S.value)==null?void 0:_.offsetHeight)+((f=S.value)==null?void 0:f.offsetTop)}),re(()=>{clearInterval(P)});const z=b(),N=b(0),d=b(),h=_=>{c.value=_,$.fetchPlayListMusic(z.value)},M=_=>{y.postDownload(_,{onlyMatchSearchKey:t.config.onlyMatchSearchKey,ignoreNoAlbumSongs:t.config.ignoreNoAlbumSongs,classificationMusicFile:t.config.classificationMusicFile},"wyy")};return(_,f)=>{const C=v("el-avatar"),A=v("el-option"),R=v("el-select"),H=v("el-table-column"),x=v("el-button"),O=v("el-table"),E=v("el-pagination");return r(),u("div",Lo,[o("div",{ref_key:"head",ref:S,class:"head"},"网易云 - "+w(i(n).netease.value.isLogin?i(n).netease.value.user.profile.nickname:"请登录"),513),o("div",{class:"areas",style:Z({height:"calc(100vh - "+L.value+"px)"})},[i(n).netease.value.isLogin?(r(),u("div",Uo,[a(Io,{"user-info":i(n).netease.value.user},null,8,["user-info"]),o("div",Vo,[a(R,{class:"playlist",onChange:f[0]||(f[0]=l=>$.fetchPlayListMusic(z.value+"")),modelValue:z.value,"onUpdate:modelValue":f[1]||(f[1]=l=>z.value=l),placeholder:"选择一个歌单",size:"large"},{default:k(()=>[(r(!0),u(te,null,oe(d.value,l=>(r(),j(A,{key:l.id,label:l.name,value:l.id,class:"select-list"},{default:k(()=>[a(C,{class:"list-img",src:l.coverImgUrl},null,8,["src"]),o("div",Ho,[o("span",Fo,w(l.name),1),o("span",Po,w(l.trackCount)+"首",1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"]),o("span",Ao,"结果列表[搜索到"+w(N.value)+"条数据,当前第"+w(c.value)+"页]",1),a(O,{class:"my-tb",data:m.value,style:{width:"100%","z-index":"0"}},{default:k(()=>[a(H,{formatter:l=>i(ae)(l.publishTime).split(" ")[0],prop:"publishTime",label:"发表时间",width:"120"},null,8,["formatter"]),a(H,{"show-overflow-tooltip":"true",prop:"name",label:"歌曲名","min-width":"300"}),a(H,{"show-overflow-tooltip":"true",formatter:l=>l.author.map(q=>q.name).join(" / "),prop:"singer.name",label:"艺术家",width:"200"},null,8,["formatter"]),a(H,{"show-overflow-tooltip":"true",prop:"album.name",label:"专辑",width:"200"}),a(H,{fixed:"right",label:"操作",width:"120"},{default:k(l=>[a(x,{link:"",type:"primary",size:"small",onClick:q=>M(l.row)},{default:k(()=>[U("下载 ")]),_:2},1032,["onClick"]),a(x,{link:"",type:"primary",size:"small"},{default:k(()=>[U("试听")]),_:1})]),_:1})]),_:1},8,["data"]),a(E,{"current-page":c.value,"onUpdate:currentPage":[f[2]||(f[2]=l=>c.value=l),h],background:"",class:"tab-split","page-size":g.value,layout:"prev, pager, next",total:N.value},null,8,["current-page","page-size","total"])])])):(r(),u("div",zo,[o("div",null,w(p.value),1),a(Me,{value:"http://music.163.com/login?codekey="+s.value,size:200,level:"H"},null,8,["value"])]))],4)])}}});const To=V(No,[["__scopeId","data-v-4dfc6617"]]);const Do={},J=e=>(T("data-v-fc626737"),e=e(),D(),e),Bo={class:"content"},Qo=J(()=>o("h1",null,"`YuanShen` Homo Lovly :)",-1)),Ro=J(()=>o("br",null,null,-1)),qo=J(()=>o("h2",null,"暂时没想好怎么写",-1)),Ko=[Qo,Ro,qo];function Oo(e,t){return r(),u("div",Bo,Ko)}const Eo=V(Do,[["render",Oo],["__scopeId","data-v-fc626737"]]),jo=[{path:"/",name:"Index",component:Pt,children:[{path:"home",alias:"/",component:ee},{path:"search",component:$o},{path:"netease",component:To},{path:"download",component:Eo}]},{path:"/home",name:"home",component:ee},{path:"/:catchAll(.*)",component:Bt}],Yo=we({history:Se(),routes:jo}),K=ue(Be),le=fe();le.use(Ce);K.use(Yo);K.use(le);K.use(de);K.mount("#app");
